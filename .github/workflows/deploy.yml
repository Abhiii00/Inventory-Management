script: |
  set -e

  echo "ğŸ“¦ Going to project directory"
  cd /home/ubuntu/Inventory-Management

  echo "â¬‡ï¸ Pulling latest code"
  git pull origin main

  echo "ğŸ”§ Backend setup"
  cd backend
  npm install
  pm2 restart backend || pm2 start src/server.js --name backend

  echo "ğŸ¨ Frontend build"
  cd ../Frontend
  npm install
  CI=false npm run build

  if [ ! -d "build" ]; then
    echo "âŒ Build folder not found"
    exit 1
  fi

  echo "ğŸš€ Deploying frontend"
  sudo rm -rf /var/www/html/*
  sudo cp -r /home/ubuntu/Inventory-Management/Frontend/build/* /var/www/html/

  echo "ğŸ” Fixing permissions"
  sudo chown -R www-data:www-data /var/www/html
  sudo chmod -R 755 /var/www/html

  echo "ğŸ’¾ Saving PM2 state"
  pm2 save

  echo "âœ… Deployment successful"